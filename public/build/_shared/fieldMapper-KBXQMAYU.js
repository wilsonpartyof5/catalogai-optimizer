import{a as f,b as d}from"/build/_shared/chunk-MWF276KD.js";import"/build/_shared/chunk-Q3IECNXJ.js";function A(e){let i={title:e.title||"",description:e.description||"",price:e.variants[0]?.price?`${e.variants[0].price} USD`:"0.00 USD",availability:C(e.variants),category:e.productType||"Uncategorized",material:n(e.metafields,"material")||L(e.title,e.description),weight:n(e.metafields,"weight"),color:n(e.metafields,"color")||j(e.title,e.description),size:n(e.metafields,"size"),brand:e.vendor||n(e.metafields,"brand"),model:n(e.metafields,"model"),sku:e.variants[0]?.sku,upc:n(e.metafields,"upc")||n(e.metafields,"barcode"),use_cases:c(e.metafields,"use_cases")||x(e.title,e.description),target_audience:n(e.metafields,"target_audience"),age_range:n(e.metafields,"age_range"),gender:n(e.metafields,"gender"),features:c(e.metafields,"features")||F(e.description),compatibility:c(e.metafields,"compatibility"),keywords:e.tags||[],tags:e.tags||[],image_urls:e.images.map(o=>o.url),video_urls:c(e.metafields,"video_urls")||c(e.metafields,"videos"),documentation_url:n(e.metafields,"documentation_url")||n(e.metafields,"manual_url"),vendor:e.vendor,warranty:n(e.metafields,"warranty"),return_policy:n(e.metafields,"return_policy"),shipping_info:n(e.metafields,"shipping_info"),ai_search_queries:c(e.metafields,"ai_search_queries"),semantic_description:n(e.metafields,"semantic_description")},s=O(e.metafields);s&&(i.dimensions=s);let t=I(e.metafields);return t&&Object.keys(t).length>0&&(i.specifications=t),i}function C(e){if(e.length===0)return"out_of_stock";let i=e.some(t=>t.availableForSale&&(t.inventoryQuantity||0)>0),s=e.some(t=>(t.inventoryQuantity||0)>0);return i?"in_stock":s&&!i?"pre_order":"out_of_stock"}function n(e,i){let s=e.find(t=>t.namespace==="catalogai"&&(t.key===i||t.key.toLowerCase().includes(i.toLowerCase())));return s||(s=e.find(t=>t.key===i||t.key.toLowerCase().includes(i.toLowerCase()))),s?.value}function c(e,i){let s=n(e,i);if(s)try{let t=JSON.parse(s);if(Array.isArray(t))return t.filter(o=>typeof o=="string")}catch{return s.includes(`
-`)||s.startsWith("-")?s.split(`
`).map(t=>t.replace(/^[-â€¢*]\s*/,"").trim()).filter(Boolean):s.split(/[,;|]/).map(t=>t.trim()).filter(Boolean)}}function O(e){let i=n(e,"length"),s=n(e,"width"),t=n(e,"height");return!i&&!s&&!t?null:{...i&&{length:i},...s&&{width:s},...t&&{height:t}}}function I(e){let i={},s=e.filter(t=>t.namespace==="specifications"||t.namespace==="specs");for(let t of s)i[t.key]=t.value;return Object.keys(i).length>0?i:null}function L(e,i){let s=["cotton","polyester","leather","metal","wood","plastic","glass","ceramic","fabric","denim","silk","wool","bamboo","steel","aluminum","bronze","silver","gold","rubber","silicone"],t=`${e} ${i}`.toLowerCase();for(let o of s)if(t.includes(o))return o.charAt(0).toUpperCase()+o.slice(1)}function j(e,i){let s=["red","blue","green","yellow","black","white","gray","grey","pink","purple","orange","brown","beige","navy","maroon"],t=`${e} ${i}`.toLowerCase();for(let o of s)if(t.includes(o))return o.charAt(0).toUpperCase()+o.slice(1)}function x(e,i){let s=["home","office","kitchen","bedroom","bathroom","garden","outdoor","travel","sports","fitness","workout","cooking","cleaning","decorative","functional","storage","organization"],t=`${e} ${i}`.toLowerCase(),o=[];for(let l of s)t.includes(l)&&o.push(l.charAt(0).toUpperCase()+l.slice(1));return o}function F(e){let i=["waterproof","durable","lightweight","compact","portable","adjustable","reversible","washable","dishwasher safe","battery powered","cordless","wireless","bluetooth","stainless steel","non-stick","heat resistant"],s=e.toLowerCase(),t=[];for(let o of i)s.includes(o)&&t.push(o.charAt(0).toUpperCase()+o.slice(1));return t}function U(e){let i=[],s=[],t=0,o=0,l=0,h=0,u={},g={required:{completed:0,total:0,points:0},high:{completed:0,total:0,points:0},medium:{completed:0,total:0,points:0},low:{completed:0,total:0,points:0}},_=r=>r!=null&&(typeof r!="string"||r.trim()!=="")&&(!Array.isArray(r)||r.length>0)&&(typeof r!="object"||Object.keys(r).length>0);[{name:"required",fields:f.required,points:d.required},{name:"high",fields:f.high,points:d.high},{name:"medium",fields:f.medium,points:d.medium},{name:"low",fields:f.low,points:d.low}].forEach(({name:r,fields:b,points:m})=>{g[r].total=Object.keys(b).length;for(let[a,p]of Object.entries(b)){t+=p,h+=m[a];let v=e[a],w=_(v);u[a]={completed:w,category:r,points:m[a],weight:p},w?(o+=p,l+=m[a],g[r].completed++,g[r].points+=m[a]):(i.push(a),r==="high"&&s.push(`Add ${a} to improve product discoverability`))}});let S=t>0?Math.round(o/t*100):0,y=Object.keys(u).length,P=Object.values(u).filter(r=>r.completed).length,k=y>0?Math.round(P/y*100):0;return{score:S,completeness:k,gaps:i,recommendations:s,points:l,maxPoints:h,fieldProgress:u,categoryProgress:g}}function D(e){return e.map(i=>{let s=A(i),t=U(s);return{...s,originalId:i.id,score:t}})}export{U as calculateProductScore,D as mapProductsToSpec,A as mapShopifyToSpec};
