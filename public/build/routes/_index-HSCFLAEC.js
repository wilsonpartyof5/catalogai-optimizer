import{c as je,d as He}from"/build/_shared/chunk-MWF276KD.js";import{a as at}from"/build/_shared/chunk-ADGUJX5W.js";import"/build/_shared/chunk-LCJSGTVF.js";import{b as Se,c as Oe,d as Fe,e as ve,f as ze,g as s,h as ie,i as Le,j as m,k as T,l as u,m as d,n as r,o as f,p as Y,q as Ue,r as ke,s as U,u as $,v as Ge,w as G,x as Ne,y as re}from"/build/_shared/chunk-Y6F7CRN3.js";import{a as Ee,h as _e,i as V,m as ae}from"/build/_shared/chunk-J72A6OT6.js";import{b as nt,c as E}from"/build/_shared/chunk-Q3IECNXJ.js";var We=nt((lt,qe)=>{qe.exports={}});var it=E(We(),1);var h=E(Ee(),1);var rt=E(at(),1);var F=E(Ee(),1);var n=E(ae(),1);function Je({isOpen:M,onClose:be,jobId:K,currentScore:X=0,currentGaps:g=[]}){let[we,N]=(0,F.useState)(!1),[S,j]=(0,F.useState)(null),[_,C]=(0,F.useState)(null),[H,q]=(0,F.useState)(!1);(0,F.useEffect)(()=>{M&&K&&W()},[M,K]);let W=async()=>{N(!0);try{let l=new FormData;l.append("action","get-results"),l.append("jobId",K);let P=await(await fetch("/api/health-check",{method:"POST",body:l})).json();P.success&&P.result?j(P.result):C({content:P.error||"Failed to fetch results",error:!0})}catch{C({content:"Failed to fetch results",error:!0})}finally{N(!1)}},ce=async()=>{if(!S)return;let l=S.gaps.filter(o=>o.fixable);if(l.length===0){C({content:"No fixable gaps found",error:!0});return}q(!0);try{let o=new FormData;o.append("action","auto-fix"),o.append("gapTypes",JSON.stringify(l.map(J=>J.field)));let R=await(await fetch("/api/health-check",{method:"POST",body:o})).json();R.success?(C({content:`Auto-fix initiated for ${l.length} gaps`}),setTimeout(W,2e3)):C({content:R.error||"Auto-fix failed",error:!0})}catch{C({content:"Auto-fix failed",error:!0})}finally{q(!1)}},v=l=>l>=90?"success":l>=70?"warning":"critical",le=l=>{switch(l){case"critical":return ze;case"error":return Se;case"warning":return Se;default:return ve}},k=l=>{switch(l){case"critical":return"critical";case"error":return"critical";case"warning":return"warning";default:return"success"}},de=l=>{if(l.length<2)return null;let o=l[l.length-1],P=l[l.length-2],R=o.score-P.score;return{value:R,icon:R>=0?Fe:Oe,color:R>=0?"success":"critical"}},Z=S?.gaps.map((l,o)=>[(0,n.jsxs)(d,{gap:"200",align:"start",children:[(0,n.jsx)(ie,{source:le(l.severity)}),(0,n.jsx)(s,{variant:"bodyMd",fontWeight:"medium",children:l.field})]},o),(0,n.jsx)(f,{tone:k(l.severity),children:l.severity},`badge-${o}`),l.count,l.fixable?"Yes":"No"])||[],ue=S?.trends.slice(-7).map((l,o)=>[new Date(l.date).toLocaleDateString(),`${l.score}%`,l.totalProducts,l.validProducts])||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{open:M,onClose:be,title:"Health Check Results",size:"large",children:(0,n.jsx)(U.Section,{children:we?(0,n.jsxs)(d,{align:"center",children:[(0,n.jsx)(Le,{size:"large"}),(0,n.jsx)(s,{variant:"bodyMd",children:"Analyzing your catalog..."})]}):S?(0,n.jsxs)(r,{gap:"400",children:[(0,n.jsx)(u,{children:(0,n.jsxs)(r,{gap:"300",children:[(0,n.jsxs)(d,{align:"space-between",children:[(0,n.jsx)(s,{variant:"headingMd",children:"Overall Health Score"}),(0,n.jsxs)(f,{tone:v(S.score),children:[S.score,"%"]})]}),(0,n.jsx)(G,{progress:S.score,size:"large",color:v(S.score)}),(0,n.jsxs)(d,{gap:"400",align:"start",children:[(0,n.jsxs)(T,{children:[(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Total Products"}),(0,n.jsx)(s,{variant:"headingMd",children:S.totalProducts})]}),(0,n.jsxs)(T,{children:[(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Valid Products"}),(0,n.jsx)(s,{variant:"headingMd",children:S.validProducts})]}),(0,n.jsxs)(T,{children:[(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Issues Found"}),(0,n.jsx)(s,{variant:"headingMd",children:S.gaps.length})]})]}),S.trends.length>1&&(0,n.jsx)(T,{children:(0,n.jsxs)(d,{gap:"200",align:"start",children:[(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"7-Day Trend"}),(()=>{let l=de(S.trends);return l?(0,n.jsxs)(d,{gap:"100",children:[(0,n.jsx)(ie,{source:l.icon}),(0,n.jsxs)(s,{variant:"bodyMd",color:l.color,children:[l.value>0?"+":"",l.value.toFixed(1),"%"]})]}):null})()]})})]})}),S.gaps.length>0&&(0,n.jsx)(u,{children:(0,n.jsxs)(r,{gap:"300",children:[(0,n.jsxs)(d,{align:"space-between",children:[(0,n.jsx)(s,{variant:"headingMd",children:"Issues Found"}),S.gaps.some(l=>l.fixable)&&(0,n.jsx)(m,{variant:"primary",onClick:ce,loading:H,disabled:H,children:"Auto-Fix Fixable Issues"})]}),(0,n.jsx)(ke,{columnContentTypes:["text","text","numeric","text"],headings:["Field","Severity","Count","Fixable"],rows:Z})]})}),S.trends.length>0&&(0,n.jsx)(u,{children:(0,n.jsxs)(r,{gap:"300",children:[(0,n.jsx)(s,{variant:"headingMd",children:"Health Score Trends (Last 7 Days)"}),(0,n.jsx)(ke,{columnContentTypes:["text","numeric","numeric","numeric"],headings:["Date","Score","Total Products","Valid Products"],rows:ue})]})}),S.gaps.length===0&&(0,n.jsx)(u,{children:(0,n.jsxs)(d,{align:"center",gap:"300",children:[(0,n.jsx)(ie,{source:ve}),(0,n.jsxs)(r,{gap:"200",children:[(0,n.jsx)(s,{variant:"headingMd",children:"Excellent!"}),(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Your catalog is in great health. No issues were found."})]})]})})]}):(0,n.jsx)(s,{variant:"bodyMd",color:"subdued",children:"No results available. Please try running the health check again."})})}),_&&(0,n.jsx)(re,{content:_.content,error:_.error,onDismiss:()=>C(null)})]})}var e=E(ae(),1);function Qe(){let M=_e(),{shop:be,totalProducts:K,averageScore:X,dashboardMetrics:g,lastSync:we,recentLogs:N,user:S}=M,[j,_]=(0,h.useState)(M.products),[C,H]=(0,h.useState)(!1),[q,W]=(0,h.useState)(!1),[ce,v]=(0,h.useState)(!1),[le,k]=(0,h.useState)(""),[de,Z]=(0,h.useState)(!1),[ue,l]=(0,h.useState)(),[o,P]=(0,h.useState)(null),[R,J]=(0,h.useState)(!1),[b,z]=(0,h.useState)([]),[w,B]=(0,h.useState)({}),[ee,xe]=(0,h.useState)(!1),[pe,Ie]=(0,h.useState)(!1),[Ve,te]=(0,h.useState)(!1),[ge,Te]=(0,h.useState)(!1),[A,O]=(0,h.useState)({}),[Ce,Pe]=(0,h.useState)(!1),[se,Be]=(0,h.useState)(!1),[oe,Ae]=(0,h.useState)(!1),me=V(),fe=V(),L=V(),he=V();(0,h.useEffect)(()=>{_(M.products)},[M.products]);let Ye=()=>{H(!0),me.submit({action:"sync"},{method:"post"})},Ke=()=>{W(!0),fe.submit({},{method:"get",action:"/api/health-check"})},$e=t=>{if(P(t),J(!0),te(!1),t.recommendations?.recommendations){console.log("\u{1F4CB} Loading existing recommendations for product:",t.id);let c=t.recommendations.recommendations;z(c);let a={};c.forEach(i=>{i.status==="approved"||i.status==="applied"?a[i.field]=!0:i.status==="rejected"&&(a[i.field]=!1)}),B(a)}else z([]),B({})},Me=()=>{o&&(xe(!0),te(!1),L.submit({action:"generate-recommendations",productId:o.id,forceRegenerate:b.length>0?"true":"false"},{method:"post"}))},Re=(t,c)=>{B(a=>({...a,[t]:c!==void 0?c:a[t]===!0?!1:a[t]===!1?void 0:!0}))},Xe=()=>{if(!o)return;let t=b.filter(i=>w[i.field]===!0),c=b.filter(i=>w[i.field]===!1),a=b.filter(i=>w[i.field]===void 0);if(console.log("\u{1F4CA} Approval Summary:",{total:b.length,approved:t.length,rejected:c.length,pending:a.length,approvedFields:t.map(i=>i.field),rejectedFields:c.map(i=>i.field)}),t.length===0){k("Please approve at least one recommendation before applying changes"),v(!0);return}console.log("\u{1F680} Starting apply changes..."),console.log("\u{1F4CB} Approved recommendations to apply:",t),Ie(!0),L.submit({action:"apply-recommendations",productId:o.id,approvedRecommendations:JSON.stringify(t)},{method:"post"})};if(me.data&&C){let t=me.data;t.success?(k(`Successfully synced ${t.data?.productsCount||0} products`),v(!0)):(k(`Sync failed: ${t.error}`),v(!0)),H(!1)}if(fe.data&&q){let t=fe.data;t.success?(l(t.jobId),Z(!0),k(`Health scan initiated - analyzing ${t.currentScore}% current score`),v(!0)):(k(`Health check failed: ${t.error}`),v(!0)),W(!1)}if(L.data&&ee){let t=L.data;if(t.success&&t.recommendations){if(z(t.recommendations),t.isExisting?k(`Loaded existing ${t.recommendations.length} AI recommendations`):k(`Generated ${t.recommendations.length} new AI recommendations`),v(!0),t.isExisting){let c={};t.recommendations.forEach(a=>{a.status==="approved"||a.status==="applied"?c[a.field]=!0:a.status==="rejected"&&(c[a.field]=!1)}),B(c)}}else t.error&&(k(`Failed to generate recommendations: ${t.error}`),v(!0));xe(!1)}if(L.data&&pe){let t=L.data;if(console.log("\u{1F50D} Apply changes response:",t),console.log("\u{1F50D} Response type:",typeof t),console.log("\u{1F50D} Response keys:",Object.keys(t)),t.success&&o){let c=b.filter(y=>w[y.field]===!0).map(y=>y.field),a=y=>({keywords:"\u{1F3AF} Awesome! Keywords added - your product is now more discoverable!",description:"\u{1F4DD} Great work! Enhanced description will help customers understand your product better!",features:"\u2728 Fantastic! Feature list added - customers can see what makes your product special!",use_cases:"\u{1F4A1} Perfect! Use cases added - customers now know how to use your product!",target_audience:"\u{1F465} Excellent! Target audience defined - your marketing just got more focused!",material:"\u{1F52C} Nice! Material info added - customers can make informed decisions!",dimensions:"\u{1F4CF} Great! Dimensions added - no more size surprises for customers!",weight:"\u2696\uFE0F Perfect! Weight information helps with shipping expectations!",color:"\u{1F3A8} Colorful! Color info added - visual buyers will love this!",brand:"\u{1F3F7}\uFE0F Brand power! Brand info strengthens customer trust!",warranty:"\u{1F6E1}\uFE0F Security boost! Warranty info builds customer confidence!",sku:"\u{1F4E6} Organized! SKU added for better inventory management!",tags:"\u{1F3F7}\uFE0F Tagged! Product categorization just got better!",ai_search_queries:"\u{1F916} AI-ready! Search queries optimized for AI discovery!",semantic_description:"\u{1F9E0} Smart! AI-optimized description for better search matching!"})[y]||`\u2705 ${y.charAt(0).toUpperCase()+y.slice(1).replace(/_/g," ")} updated!`,i="";c.length===1?i=a(c[0]):c.length===2?i=`\u{1F389} Double win! Updated ${c.map(y=>y.replace(/_/g," ")).join(" and ")}!`:c.length>=3&&(i=`\u{1F680} Amazing progress! Applied ${c.length} improvements - you're on fire!`);let p=o.score,x=0;if(t.scoreImprovement){p=t.scoreImprovement.final;let y=t.scoreImprovement.improvement;x=c.length*15,y>0?i+=` \u{1F4C8} Score: ${t.scoreImprovement.initial}% \u2192 ${t.scoreImprovement.final}% (+${y.toFixed(0)}%) | +${x} points!`:i+=` \u{1F4CA} Score: ${t.scoreImprovement.final}%`}let ne=o.gaps.filter(y=>!c.includes(y)),I={...o,score:p,gaps:ne};_(y=>y.map(Q=>Q.id===o.id?I:Q)),P(I),z([]),B({}),te(!0);let D=typeof i=="string"&&i.length>0&&!i.match(/^\d{3}$/)?i:"Changes applied successfully!";k(D),v(!0)}else t.error?(k(`Failed to apply changes: ${t.error}`),v(!0)):(console.error("\u{1F6A8} Unexpected response format:",t),k(`Unexpected response: ${JSON.stringify(t)}`),v(!0));Ie(!1)}if(he.data&&Ce){let t=he.data;if(console.log("\u{1F50D} Customer input save response:",t),t.success&&o){let c=t.appliedFields||[],a=t.appliedCount||0,i="";a===1?i=`\u{1F389} Great! ${c[0]?.replace(/_/g," ")} added to your product specs!`:a>1&&(i=`\u{1F680} Excellent! Added ${a} product specifications!`);let p=a*4;i+=` \u{1F4C8} Health score boost: ~+${p}% | +${a*15} points!`;let x=o.gaps.filter(D=>!c.includes(D)),ne=Math.min(100,o.score+p),I={...o,score:ne,gaps:x};_(D=>D.map(y=>y.id===o.id?I:y)),P(I),O({}),Te(!1),te(!0),k(i),v(!0)}else t.error&&(k(`Failed to save: ${t.error}`),v(!0));Pe(!1)}let Ze=t=>({material:"e.g., Cotton, Polyester, Steel, Wood",weight:"e.g., 2.5 lbs, 1.2 kg",color:"e.g., Navy Blue, Black, Red",size:"e.g., Large, XL, 12x8x4",brand:"e.g., Your Brand Name",model:"e.g., Model ABC-123",upc:"e.g., 123456789012",vendor:"e.g., Supplier Company",age_range:"e.g., 18-65, Adults, 3+",compatibility:"e.g., iPhone 12, Samsung Galaxy",warranty:"e.g., 1 year limited warranty",return_policy:"e.g., 30-day returns accepted",shipping_info:"e.g., Free shipping over $50",specifications:"e.g., Power: 110V, Material: ABS Plastic",documentation_url:"e.g., https://yoursite.com/manual.pdf",video_urls:"e.g., https://youtube.com/watch?v=abc123"})[t]||`Enter ${t.replace(/_/g," ")}`,et=t=>({material:"Primary material or fabric composition",weight:"Product weight with unit (lbs, kg, oz)",color:"Primary color or color options",brand:"Manufacturer or brand name",warranty:"Warranty terms and duration",upc:"Universal Product Code for inventory",specifications:"Technical specs, one per line"})[t]||"",tt=t=>{let c={required:25,high:20,medium:15,low:10},a=["material","dimensions","weight","brand"],i=["color","size","upc","compatibility","age_range","gender"];return a.includes(t)?c.high:i.includes(t)?c.medium:c.low},st=t=>{let c=["material","dimensions","weight","brand"],a=["color","size","upc","compatibility","age_range","gender"];return c.includes(t)?"4-5":a.includes(t)?"3-4":"2-3"},ot=()=>{if(!o)return;let t=[],c={};if(Object.entries(A).forEach(([a,i])=>{let p=i.trim();p&&(a==="upc"&&p.length<8?t.push("UPC must be at least 8 digits"):a==="weight"&&!/\d+(\.\d+)?\s*(lbs?|kgs?|oz|pounds?|kilograms?|ounces?)/i.test(p)?t.push('Weight must include unit (e.g., "2.5 lbs", "1.2 kg")'):(a==="documentation_url"||a==="video_urls")&&p&&!p.startsWith("http")?t.push(`${a.replace(/_/g," ")} must be a valid URL starting with http`):a==="age_range"&&p&&!/\d+/.test(p)?t.push('Age range must contain numbers (e.g., "18+", "3-12")'):c[a]=p)}),t.length>0){k(`Validation errors: ${t.join(", ")}`),v(!0);return}if(Object.keys(c).length===0){k("Please fill in at least one field before saving"),v(!0);return}Pe(!0),he.submit({action:"save-customer-input",productId:o.id,inputData:JSON.stringify(c)},{method:"post"})},ye=j.filter(t=>!(se&&t.score>=70||oe&&t.description&&t.description!=="No description")),ct=j.map(t=>[t.id,t.title,t.description.length>50?`${t.description.substring(0,50)}...`:t.description,`${t.score}%`,t.gaps.length>0?t.gaps.join(", "):"None"]);return(0,e.jsxs)(Ge,{title:"CatalogAI Optimizer Dashboard",children:[(0,e.jsxs)($,{children:[(0,e.jsx)($.Section,{children:(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[(0,e.jsx)(u,{children:(0,e.jsxs)(r,{align:"center",children:[(0,e.jsxs)("div",{style:{position:"relative",width:"80px",height:"80px",marginBottom:"10px"},children:[(0,e.jsxs)("svg",{width:"80",height:"80",style:{transform:"rotate(-90deg)"},children:[(0,e.jsx)("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),(0,e.jsx)("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:g.aiReadinessScore>=90?"#10b981":g.aiReadinessScore>=50?"#f59e0b":"#ef4444",strokeWidth:"8",strokeDasharray:`${g.aiReadinessScore/100*220} 220`,strokeLinecap:"round"})]}),(0,e.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"18px",fontWeight:"bold",color:g.aiReadinessScore>=90?"#10b981":g.aiReadinessScore>=50?"#f59e0b":"#ef4444"},children:[g.aiReadinessScore,"%"]})]}),(0,e.jsxs)(s,{variant:"headingLg",as:"p",children:[g.aiReadinessScore," / 100"]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Excellent AI readiness"})]})}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{align:"center",children:[(0,e.jsxs)(s,{variant:"headingLg",as:"p",children:[g.productsPassedPercentage,"%"]}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[g.validProducts," of ",g.totalProducts," products"]}),(0,e.jsx)(s,{variant:"bodySm",tone:"success",as:"p",children:"\u2191 5% from last week"})]})}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{align:"center",children:[(0,e.jsx)(s,{variant:"headingLg",as:"p",children:g.lastSyncTime?`${Math.floor((Date.now()-new Date(g.lastSyncTime).getTime())/(1e3*60*60))}h ago`:"Never"}),(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:"Last synced successfully"})]})})]})}),(0,e.jsx)($.Section,{children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"Feed Health"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Product validation distribution"}),(0,e.jsxs)("div",{style:{marginTop:"20px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,e.jsx)("div",{style:{width:`${g.validProducts/g.totalProducts*200}px`,height:"8px",background:"#10b981",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[g.validProducts," products"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,e.jsx)("div",{style:{width:`${g.warningProducts/g.totalProducts*200}px`,height:"8px",background:"#f59e0b",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[g.warningProducts," products"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,e.jsx)("div",{style:{width:`${g.invalidProducts/g.totalProducts*200}px`,height:"8px",background:"#ef4444",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[g.invalidProducts," products"]})]}),(0,e.jsx)(m,{variant:"primary",children:"View Validation Report"})]})]})})}),(0,e.jsx)($.Section,{children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"Next Actions"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Recommended optimizations for your catalog"}),(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginTop:"20px"},children:[(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[g.invalidProducts," products need attention"]}),(0,e.jsx)(m,{variant:"primary",tone:"critical",children:"Take Action"})]})}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:["Optimize ",g.warningProducts," products"]}),(0,e.jsx)(m,{variant:"primary",children:"Take Action"})]})})]})]})})}),(0,e.jsx)($.Section,{children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)("div",{style:{marginBottom:"10px"},children:(0,e.jsx)("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:(0,e.jsx)("div",{style:{width:`${g.optimizationProgress}%`,height:"100%",background:"#3b82f6",transition:"width 0.3s ease"}})})}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:["Your catalog is ",g.optimizationProgress,"% AI-ready \u2014 ",100-g.optimizationProgress,"% left to optimize!"]}),(0,e.jsxs)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:[g.optimizationProgress,"% Complete"]})]}),(0,e.jsx)("div",{style:{marginTop:"5px"},children:(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Keep going! \u{1F680}"})})]})})}),(0,e.jsx)($.Section,{children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"\u{1F4E6} Product Catalog"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Browse and manage your product inventory"})]}),(0,e.jsx)(d,{children:(0,e.jsx)(m,{onClick:Ye,loading:C,variant:"primary",size:"large",children:C?"Syncing...":"\u{1F504} Sync Products"})})]}),(0,e.jsx)(u,{children:(0,e.jsxs)(d,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Filter by:"}),(0,e.jsx)(m,{variant:se?"primary":"tertiary",size:"slim",onClick:()=>Be(!se),children:"\u{1F6A8} Low Health Only"}),(0,e.jsx)(m,{variant:oe?"primary":"tertiary",size:"slim",onClick:()=>Ae(!oe),children:"\u{1F4DD} Missing Descriptions"})]}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Showing ",ye.length," of ",j.length," products"]})]})}),(0,e.jsx)("div",{className:"product-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px",marginTop:"20px",width:"100%"},children:ye.map((t,c)=>(0,e.jsx)(u,{children:(0,e.jsxs)(d,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(m,{variant:"plain",onClick:()=>$e(t),children:t.title}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["ID: ",t.id]})]}),(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:t.description&&t.description!=="No description"?t.description.length>100?`${t.description.substring(0,100)}...`:t.description:(0,e.jsx)(s,{tone:"subdued",variant:"bodyMd",as:"p",children:"No description available"})}),t.gaps.length>0&&(0,e.jsxs)(d,{wrap:!0,children:[t.gaps.slice(0,3).map((a,i)=>(0,e.jsx)(f,{tone:"warning",size:"small",children:a},i)),t.gaps.length>3&&(0,e.jsx)(f,{tone:"info",size:"small",children:`+${t.gaps.length-3} more`})]})]})]}),(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(G,{progress:t.score,size:"small"}),(0,e.jsx)(f,{tone:t.score>=90?"success":t.score>=70?"warning":"critical",size:"small",children:`${t.score}%`})]}),(0,e.jsx)(m,{size:"slim",variant:"primary",onClick:()=>$e(t),children:"\u{1F527} Optimize"})]})]})},t.id))}),ye.length===0&&(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F389} No products match your filters!"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:se?"All your products are healthy! Great job maintaining your catalog.":oe?"All your products have descriptions! Your catalog is well-documented.":"No products found matching your current filters."}),(0,e.jsx)(m,{variant:"tertiary",onClick:()=>{Be(!1),Ae(!1)},children:"Clear Filters"})]})})]})})}),(0,e.jsx)($.Section,{variant:"oneHalf",children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Quick Actions"}),(0,e.jsxs)(r,{children:[(0,e.jsx)(m,{fullWidth:!0,onClick:Ke,loading:q,variant:X<90?"primary":"secondary",children:X<90?"Quick Scan Now":"Run Health Check"}),(0,e.jsx)(m,{fullWidth:!0,children:"Generate Feed"}),(0,e.jsx)(m,{fullWidth:!0,children:"View Analytics"})]})]})})}),(0,e.jsx)($.Section,{variant:"oneHalf",children:(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Recent Activity"}),(0,e.jsx)(r,{children:N.length>0?N.map(t=>(0,e.jsxs)(r,{children:[(0,e.jsxs)(s,{as:"span",children:[t.type==="sync"&&"\u{1F504} ",t.type==="push"&&"\u{1F4E4} ",t.type==="error"&&"\u274C ",t.type==="health_scan"&&"\u{1F50D} ",t.type==="auto_fix"&&"\u{1F527} ",t.type==="ai_enrichment"&&"\u{1F916} ",t.type==="settings_update"&&"\u2699\uFE0F ",t.message]}),(0,e.jsx)(s,{as:"p",variant:"bodySm",tone:"subdued",children:new Date(t.createdAt).toLocaleString()})]},t.id)):(0,e.jsx)(s,{as:"p",tone:"subdued",children:"No recent activity"})})]})})})]}),ce&&(0,e.jsx)(re,{content:le,onDismiss:()=>v(!1)}),(0,e.jsx)(Je,{isOpen:de,onClose:()=>Z(!1),jobId:ue,currentScore:X,currentGaps:[]}),(0,e.jsx)(U,{open:R,onClose:()=>J(!1),title:"",size:"large",primaryAction:{content:"Close",onAction:()=>J(!1)},children:o&&(0,e.jsx)(U.Section,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsxs)(s,{variant:"headingLg",as:"h2",children:["\u{1F4E6} ",o.title]}),(0,e.jsxs)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:["Product ID: ",o.id]}),o.description&&o.description!=="No description"&&(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:o.description})]}),(0,e.jsxs)(r,{children:[(0,e.jsxs)(f,{tone:o.score>=90?"success":o.score>=70?"warning":"critical",size:"large",children:[o.score,"% Health"]}),Ve&&(0,e.jsx)(f,{tone:"success",size:"small",children:"\u2728 Just Updated!"})]})]}),(0,e.jsxs)(T,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Overall Health Progress"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:`${Math.round(o.score/100*500)} / 500 points`})]}),(0,e.jsx)(T,{paddingBlockStart:"200",children:(0,e.jsx)(G,{progress:o.score,size:"large"})})]})]})}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F4CA} Category Breakdown"}),(0,e.jsx)(d,{children:[{name:"\u{1F6A8} Required Fields",icon:"\u{1F6A8}",fields:["title","description","price","availability","category"],color:"critical",description:"Essential for product visibility"},{name:"\u26A1 High Priority",icon:"\u26A1",fields:["material","dimensions","weight","brand","use_cases","features","image_urls"],color:"warning",description:"Important for customer decisions"},{name:"\u{1F4CB} Medium Priority",icon:"\u{1F4CB}",fields:["color","size","target_audience","keywords","upc","compatibility","age_range","gender","video_urls"],color:"attention",description:"Enhances product discovery"},{name:"\u2728 Enhancement",icon:"\u2728",fields:["model","sku","tags","vendor","warranty","return_policy","shipping_info","documentation_url","specifications","ai_search_queries","semantic_description"],color:"success",description:"Optimizes for AI search"}].map((t,c)=>{let a=o.gaps.filter(x=>t.fields.includes(x)).length,i=t.fields.length-a,p=Math.round(i/t.fields.length*100);return(0,e.jsx)(u,{children:(0,e.jsxs)(d,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(s,{variant:"headingSm",as:"h4",children:[t.icon," ",t.name]}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:t.description}),(0,e.jsxs)(d,{wrap:!0,children:[(0,e.jsxs)(s,{variant:"bodySm",as:"p",children:[i,"/",t.fields.length," complete"]}),a>0&&(0,e.jsx)(f,{tone:"warning",size:"small",children:`${a} missing`})]})]}),(0,e.jsxs)(r,{children:[(0,e.jsx)(G,{progress:p,size:"small"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:`${p}% complete`})]})]})},c)})})]})}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F50D} Missing Fields Analysis"}),o.gaps.length===0?(0,e.jsx)(f,{tone:"success",size:"large",children:"\u{1F389} Perfect Score!"}):(0,e.jsx)(f,{tone:"critical",size:"large",children:`${o.gaps.length} fields missing`})]}),o.gaps.length>0?(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"These fields are missing and could improve your product's visibility and AI search performance:"}),(0,e.jsx)(d,{wrap:!0,children:o.gaps.map((t,c)=>(0,e.jsx)(f,{tone:"warning",size:"small",children:t.replace(/_/g," ")},c))})]}):(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"success",as:"p",children:"\u{1F389} Congratulations! Your product has all the essential fields completed."}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"This product is optimized for search engines and AI-powered discovery."})]})]})}),o.gaps.length>0&&(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F916} AI Recommendations"}),b.length>0&&(0,e.jsx)(m,{onClick:()=>{z([]),B({}),Me()},variant:"secondary",size:"slim",loading:ee,children:"\u{1F504} Regenerate"})]}),b.length===0?(0,e.jsxs)(r,{children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"\u{1F3AF} Ready to improve your product's health score?"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Our AI will analyze your missing fields and suggest improvements for:"}),(0,e.jsxs)(d,{wrap:!0,children:[o.gaps.slice(0,5).map((t,c)=>(0,e.jsx)(f,{tone:"warning",size:"small",children:t.replace(/_/g," ")},c)),o.gaps.length>5&&(0,e.jsx)(f,{tone:"info",size:"small",children:`+${o.gaps.length-5} more`})]})]}),(0,e.jsx)(m,{onClick:Me,variant:"primary",size:"large",loading:ee,children:ee?"\u{1F916} Generating...":"\u{1F680} Generate AI Recommendations"})]}):(0,e.jsxs)(r,{children:[o.recommendations?.generatedAt&&(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Generated: ",new Date(o.recommendations.generatedAt).toLocaleString()]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Review and approve the AI-generated suggestions below. Only approved changes will be applied to your product."})]})]})}),b.length>0&&(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u270F\uFE0F Review & Approve Recommendations"}),(0,e.jsxs)(d,{children:[(0,e.jsx)(f,{tone:"success",size:"small",children:`${Object.values(w).filter(Boolean).length} approved`}),(0,e.jsx)(f,{tone:"critical",size:"small",children:`${Object.values(w).filter(t=>t===!1).length} rejected`})]})]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Review each AI suggestion below. Use \u2705 to approve or \u274C to reject. Only approved changes will be applied to your product."}),(0,e.jsx)(u,{children:(0,e.jsxs)(d,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Quick Actions:"}),(0,e.jsxs)(d,{children:[(0,e.jsx)(m,{size:"slim",variant:"secondary",tone:"success",onClick:()=>{let t=b.reduce((c,a)=>({...c,[a.field]:!0}),{});B(t)},children:"\u2705 Approve All"}),(0,e.jsx)(m,{size:"slim",variant:"secondary",tone:"critical",onClick:()=>{let t=b.reduce((c,a)=>({...c,[a.field]:!1}),{});B(t)},children:"\u274C Reject All"}),(0,e.jsx)(m,{size:"slim",variant:"secondary",onClick:()=>B({}),children:"Clear All"})]})]})}),(0,e.jsx)(r,{children:b.map((t,c)=>{let a=w[t.field]===!0,i=w[t.field]===!1,p=w[t.field]===void 0,x=t.status==="applied",I=(D=>{let y={required:{fields:["title","description","price","availability","category"],points:"25",impact:"5-6%",color:"critical",icon:"\u{1F6A8}"},high:{fields:["material","dimensions","weight","brand","use_cases","features","image_urls"],points:"20",impact:"4-5%",color:"warning",icon:"\u26A1"},medium:{fields:["color","size","target_audience","keywords","upc","compatibility","age_range","gender","video_urls"],points:"15",impact:"3-4%",color:"attention",icon:"\u{1F4CB}"},low:{fields:["model","sku","tags","vendor","warranty","return_policy","shipping_info","documentation_url","specifications","ai_search_queries","semantic_description"],points:"10",impact:"2-3%",color:"info",icon:"\u2728"}};for(let[Q,De]of Object.entries(y))if(De.fields.includes(D))return{category:Q,...De};return{category:"low",fields:[],points:"10",impact:"2%",color:"info",icon:"\u2728"}})(t.field);return(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(s,{variant:"headingSm",as:"h4",children:[I.icon," ",t.field.charAt(0).toUpperCase()+t.field.slice(1).replace(/_/g," ")]}),(0,e.jsx)(f,{tone:I.color,size:"small",children:I.category.charAt(0).toUpperCase()+I.category.slice(1)})]}),(0,e.jsxs)(d,{wrap:!0,children:[(0,e.jsxs)(f,{tone:"info",size:"small",children:["+",I.points," pts"]}),(0,e.jsxs)(f,{tone:"subdued",size:"small",children:["~",I.impact," impact"]}),x&&(0,e.jsx)(f,{tone:"success",size:"small",children:"\u{1F680} Applied"}),!x&&a&&(0,e.jsx)(f,{tone:"success",size:"small",children:"\u2705 Approved"}),!x&&i&&(0,e.jsx)(f,{tone:"critical",size:"small",children:"\u274C Rejected"}),!x&&p&&(0,e.jsx)(f,{tone:"attention",size:"small",children:"\u23F3 Pending"})]})]}),!x&&(0,e.jsxs)(d,{children:[(0,e.jsx)(m,{size:"slim",onClick:()=>Re(t.field,!1),variant:i?"primary":"secondary",tone:i?"critical":void 0,children:i?"\u274C Rejected":"\u274C Reject"}),(0,e.jsx)(m,{size:"slim",onClick:()=>Re(t.field,!0),variant:a?"primary":"secondary",tone:a?"success":void 0,children:a?"\u2705 Approved":"\u2705 Approve"})]})]}),(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Current Value"}),(0,e.jsx)(T,{padding:"200",borderRadius:"100",children:(0,e.jsx)(s,{variant:"bodySm",as:"p",children:t.originalValue||(0,e.jsx)(s,{tone:"subdued",as:"p",children:"(empty)"})})})]}),(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"success",as:"p",children:"AI Recommendation"}),(0,e.jsx)(T,{padding:"200",borderRadius:"100",children:(0,e.jsx)(s,{variant:"bodySm",as:"p",children:t.newValue})})]})]}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["\u{1F4A1} ",(0,e.jsx)("em",{children:t.improvement})]})]})})]})},c)})}),(0,e.jsx)(u,{children:(0,e.jsxs)(d,{children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Ready to apply your approved changes?"}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:[b.filter(t=>t.status!=="applied"&&w[t.field]===!0).length," changes approved for application"]})]}),(0,e.jsxs)(d,{children:[(0,e.jsx)(m,{onClick:()=>z([]),variant:"secondary",children:"Cancel"}),(0,e.jsx)(m,{variant:"primary",size:"large",onClick:Xe,loading:pe,disabled:b.filter(t=>t.status!=="applied"&&w[t.field]===!0).length===0,children:pe?"\u{1F680} Applying...":`\u2705 Apply ${b.filter(t=>t.status!=="applied"&&w[t.field]===!0).length} Changes`})]})]})})]})}),o.gaps.length>0&&(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(d,{align:"space-between",children:[(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Manual Product Information"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Fill in product specs that only you know. These can't be generated by AI."})]}),(0,e.jsx)(m,{onClick:()=>Te(!ge),variant:"secondary",size:"slim",children:ge?"Hide Fields":"Add Product Info"})]}),(0,e.jsx)(Ue,{id:"customer-input-collapsible",open:ge,children:(0,e.jsxs)(r,{children:[o.gaps.filter(t=>je(t)==="customer_required").map((t,c)=>{let a=He[t]||t.charAt(0).toUpperCase()+t.slice(1).replace(/_/g," ");return(0,e.jsxs)(T,{children:[t==="dimensions"?(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"bodySm",as:"p",children:a}),(0,e.jsxs)(d,{gap:"300",children:[(0,e.jsx)(Y,{label:"Length",value:A[`${t}_length`]||"",onChange:i=>O(p=>({...p,[`${t}_length`]:i})),placeholder:"e.g., 12 inches",autoComplete:"off"}),(0,e.jsx)(Y,{label:"Width",value:A[`${t}_width`]||"",onChange:i=>O(p=>({...p,[`${t}_width`]:i})),placeholder:"e.g., 8 inches",autoComplete:"off"}),(0,e.jsx)(Y,{label:"Height",value:A[`${t}_height`]||"",onChange:i=>O(p=>({...p,[`${t}_height`]:i})),placeholder:"e.g., 4 inches",autoComplete:"off"})]})]}):t==="gender"?(0,e.jsx)(Ne,{label:a,options:[{label:"Select target gender",value:""},{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Unisex",value:"unisex"},{label:"Kids",value:"kids"}],value:A[t]||"",onChange:i=>O(p=>({...p,[t]:i}))}):(0,e.jsx)(Y,{label:a,value:A[t]||"",onChange:i=>O(p=>({...p,[t]:i})),placeholder:Ze(t),helpText:et(t),multiline:t==="specifications"||t==="warranty"||t==="return_policy",autoComplete:"off"}),(0,e.jsx)(T,{paddingBlockStart:"200",children:(0,e.jsxs)(d,{gap:"200",blockAlign:"center",children:[(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Impact: +",tt(t)," points, ~",st(t),"% health boost"]}),A[t]&&(0,e.jsx)(f,{tone:"success",size:"small",children:"\u2705 Ready to save"})]})})]},c)}),Object.keys(A).length>0&&(0,e.jsxs)(d,{align:"end",children:[(0,e.jsx)(m,{onClick:()=>O({}),children:"Clear All"}),(0,e.jsxs)(m,{variant:"primary",onClick:ot,loading:Ce,children:["Save ",Object.values(A).filter(t=>t.trim()).length," Fields"]})]})]})})]})}),o.score>=90&&(0,e.jsx)(u,{children:(0,e.jsxs)(r,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:o.score===100?"\u{1F389} Perfect Product Health!":"\u2705 Product Health: Excellent"}),(0,e.jsx)(s,{as:"p",children:o.score===100?"Congratulations! This product has achieved perfect health with all OpenAI spec requirements met.":"This product has a high health score and does not need immediate attention."}),o.gaps.length===0&&o.score===100&&(0,e.jsx)(s,{variant:"bodySm",tone:"success",as:"p",children:"\u{1F680} Ready for OpenAI ChatGPT discovery!"})]})})]})})})]})}export{Qe as default};
