import{c as me,d as he}from"/build/_shared/chunk-MWF276KD.js";import{a as ve,b as Z,c as re,d as ce,e as ee,f as le,g as s,h as J,i as de,j as g,k,l as d,m as l,n as i,o as m,p as L,q as ue,r as te,s as $,t as x,u as pe,v as D,w as ge,x as Q}from"/build/_shared/chunk-LV7ZJ24I.js";import"/build/_shared/chunk-KADRYHQJ.js";import{a as ke}from"/build/_shared/chunk-ADGUJX5W.js";import{a as Se,g as ie,h as z,l as W}from"/build/_shared/chunk-LOR64ATL.js";import{c as A}from"/build/_shared/chunk-Q3IECNXJ.js";var be=A(ve());var we=A(ke());var B=A(Se());var o=A(W());function fe({isOpen:R,onClose:se,jobId:U,currentScore:G=0,currentGaps:p=[]}){let[oe,O]=(0,B.useState)(!1),[f,E]=(0,B.useState)(null),[C,b]=(0,B.useState)(null),[I,M]=(0,B.useState)(!1);(0,B.useEffect)(()=>{R&&U&&H()},[R,U]);let H=async()=>{O(!0);try{let c=new FormData;c.append("action","get-results"),c.append("jobId",U);let T=await(await fetch("/api/health-check",{method:"POST",body:c})).json();T.success&&T.result?E(T.result):b({content:T.error||"Failed to fetch results",error:!0})}catch{b({content:"Failed to fetch results",error:!0})}finally{O(!1)}},V=async()=>{if(!f)return;let c=f.gaps.filter(y=>y.fixable);if(c.length===0){b({content:"No fixable gaps found",error:!0});return}M(!0);try{let y=new FormData;y.append("action","auto-fix"),y.append("gapTypes",JSON.stringify(c.map(ae=>ae.field)));let w=await(await fetch("/api/health-check",{method:"POST",body:y})).json();w.success?(b({content:`Auto-fix initiated for ${c.length} gaps`}),setTimeout(H,2e3)):b({content:w.error||"Auto-fix failed",error:!0})}catch{b({content:"Auto-fix failed",error:!0})}finally{M(!1)}},_=c=>c>=90?"success":c>=70?"warning":"critical",N=c=>{switch(c){case"critical":return le;case"error":return Z;case"warning":return Z;default:return ee}},j=c=>{switch(c){case"critical":return"critical";case"error":return"critical";case"warning":return"warning";default:return"success"}},Y=c=>{if(c.length<2)return null;let y=c[c.length-1],T=c[c.length-2],w=y.score-T.score;return{value:w,icon:w>=0?ce:re,color:w>=0?"success":"critical"}},K=f?.gaps.map((c,y)=>[(0,o.jsxs)(l,{gap:"200",align:"start",children:[(0,o.jsx)(J,{source:N(c.severity)}),(0,o.jsx)(s,{variant:"bodyMd",fontWeight:"medium",children:c.field})]},y),(0,o.jsx)(m,{tone:j(c.severity),children:c.severity},`badge-${y}`),c.count,c.fixable?"Yes":"No"])||[],X=f?.trends.slice(-7).map((c,y)=>[new Date(c.date).toLocaleDateString(),`${c.score}%`,c.totalProducts,c.validProducts])||[];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($,{open:R,onClose:se,title:"Health Check Results",size:"large",children:(0,o.jsx)($.Section,{children:oe?(0,o.jsxs)(l,{align:"center",children:[(0,o.jsx)(de,{size:"large"}),(0,o.jsx)(s,{variant:"bodyMd",children:"Analyzing your catalog..."})]}):f?(0,o.jsxs)(i,{gap:"400",children:[(0,o.jsx)(d,{children:(0,o.jsxs)(i,{gap:"300",children:[(0,o.jsxs)(l,{align:"space-between",children:[(0,o.jsx)(s,{variant:"headingMd",children:"Overall Health Score"}),(0,o.jsxs)(m,{tone:_(f.score),children:[f.score,"%"]})]}),(0,o.jsx)(D,{progress:f.score,size:"large",color:_(f.score)}),(0,o.jsxs)(l,{gap:"400",align:"start",children:[(0,o.jsxs)(k,{children:[(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Total Products"}),(0,o.jsx)(s,{variant:"headingMd",children:f.totalProducts})]}),(0,o.jsxs)(k,{children:[(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Valid Products"}),(0,o.jsx)(s,{variant:"headingMd",children:f.validProducts})]}),(0,o.jsxs)(k,{children:[(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Issues Found"}),(0,o.jsx)(s,{variant:"headingMd",children:f.gaps.length})]})]}),f.trends.length>1&&(0,o.jsx)(k,{children:(0,o.jsxs)(l,{gap:"200",align:"start",children:[(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"7-Day Trend"}),(()=>{let c=Y(f.trends);return c?(0,o.jsxs)(l,{gap:"100",children:[(0,o.jsx)(J,{source:c.icon}),(0,o.jsxs)(s,{variant:"bodyMd",color:c.color,children:[c.value>0?"+":"",c.value.toFixed(1),"%"]})]}):null})()]})})]})}),f.gaps.length>0&&(0,o.jsx)(d,{children:(0,o.jsxs)(i,{gap:"300",children:[(0,o.jsxs)(l,{align:"space-between",children:[(0,o.jsx)(s,{variant:"headingMd",children:"Issues Found"}),f.gaps.some(c=>c.fixable)&&(0,o.jsx)(g,{variant:"primary",onClick:V,loading:I,disabled:I,children:"Auto-Fix Fixable Issues"})]}),(0,o.jsx)(te,{columnContentTypes:["text","text","numeric","text"],headings:["Field","Severity","Count","Fixable"],rows:K})]})}),f.trends.length>0&&(0,o.jsx)(d,{children:(0,o.jsxs)(i,{gap:"300",children:[(0,o.jsx)(s,{variant:"headingMd",children:"Health Score Trends (Last 7 Days)"}),(0,o.jsx)(te,{columnContentTypes:["text","numeric","numeric","numeric"],headings:["Date","Score","Total Products","Valid Products"],rows:X})]})}),f.gaps.length===0&&(0,o.jsx)(d,{children:(0,o.jsxs)(l,{align:"center",gap:"300",children:[(0,o.jsx)(J,{source:ee}),(0,o.jsxs)(i,{gap:"200",children:[(0,o.jsx)(s,{variant:"headingMd",children:"Excellent!"}),(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"Your catalog is in great health. No issues were found."})]})]})})]}):(0,o.jsx)(s,{variant:"bodyMd",color:"subdued",children:"No results available. Please try running the health check again."})})}),C&&(0,o.jsx)(Q,{content:C.content,error:C.error,onDismiss:()=>b(null)})]})}var e=A(W());function ye(){let R=ie(),{shop:se,totalProducts:U,averageScore:G,dashboardMetrics:p,lastSync:oe,recentLogs:O,user:f,products:E}=R,C=z(),b=z(),I=z(),M=z(),H=()=>{setIsSyncing(!0),C.submit({action:"sync"},{method:"post"})},V=()=>{setIsHealthChecking(!0),b.submit({},{method:"get",action:"/api/health-check"})},_=t=>{if(setSelectedProduct(t),setProductModalOpen(!0),setJustAppliedChanges(!1),t.recommendations?.recommendations){console.log("\u{1F4CB} Loading existing recommendations for product:",t.id);let r=t.recommendations.recommendations;setRecommendations(r);let a={};r.forEach(n=>{n.status==="approved"||n.status==="applied"?a[n.field]=!0:n.status==="rejected"&&(a[n.field]=!1)}),setApprovalState(a)}else setRecommendations([]),setApprovalState({})},N=()=>{selectedProduct&&(setIsGeneratingRecommendations(!0),setJustAppliedChanges(!1),I.submit({action:"generate-recommendations",productId:selectedProduct.id,forceRegenerate:recommendations.length>0?"true":"false"},{method:"post"}))},j=(t,r)=>{setApprovalState(a=>({...a,[t]:r!==void 0?r:a[t]===!0?!1:a[t]===!1?void 0:!0}))},Y=()=>{if(!selectedProduct)return;let t=recommendations.filter(n=>approvalState[n.field]===!0),r=recommendations.filter(n=>approvalState[n.field]===!1),a=recommendations.filter(n=>approvalState[n.field]===void 0);if(console.log("\u{1F4CA} Approval Summary:",{total:recommendations.length,approved:t.length,rejected:r.length,pending:a.length,approvedFields:t.map(n=>n.field),rejectedFields:r.map(n=>n.field)}),t.length===0){setToastMessage("Please approve at least one recommendation before applying changes"),setToastActive(!0);return}console.log("\u{1F680} Starting apply changes..."),console.log("\u{1F4CB} Approved recommendations to apply:",t),setIsApplyingChanges(!0),I.submit({action:"apply-recommendations",productId:selectedProduct.id,approvedRecommendations:JSON.stringify(t)},{method:"post"})};if(C.data&&isSyncing){let t=C.data;t.success?(setToastMessage(`Successfully synced ${t.data?.productsCount||0} products`),setToastActive(!0)):(setToastMessage(`Sync failed: ${t.error}`),setToastActive(!0)),setIsSyncing(!1)}if(b.data&&isHealthChecking){let t=b.data;t.success?(setHealthCheckJobId(t.jobId),setHealthModalOpen(!0),setToastMessage(`Health scan initiated - analyzing ${t.currentScore}% current score`),setToastActive(!0)):(setToastMessage(`Health check failed: ${t.error}`),setToastActive(!0)),setIsHealthChecking(!1)}if(I.data&&isGeneratingRecommendations){let t=I.data;if(t.success&&t.recommendations){if(setRecommendations(t.recommendations),t.isExisting?setToastMessage(`Loaded existing ${t.recommendations.length} AI recommendations`):setToastMessage(`Generated ${t.recommendations.length} new AI recommendations`),setToastActive(!0),t.isExisting){let r={};t.recommendations.forEach(a=>{a.status==="approved"||a.status==="applied"?r[a.field]=!0:a.status==="rejected"&&(r[a.field]=!1)}),setApprovalState(r)}}else t.error&&(setToastMessage(`Failed to generate recommendations: ${t.error}`),setToastActive(!0));setIsGeneratingRecommendations(!1)}if(I.data&&isApplyingChanges){let t=I.data;if(console.log("\u{1F50D} Apply changes response:",t),console.log("\u{1F50D} Response type:",typeof t),console.log("\u{1F50D} Response keys:",Object.keys(t)),t.success&&selectedProduct){let r=recommendations.filter(h=>approvalState[h.field]===!0).map(h=>h.field),a=h=>({keywords:"\u{1F3AF} Awesome! Keywords added - your product is now more discoverable!",description:"\u{1F4DD} Great work! Enhanced description will help customers understand your product better!",features:"\u2728 Fantastic! Feature list added - customers can see what makes your product special!",use_cases:"\u{1F4A1} Perfect! Use cases added - customers now know how to use your product!",target_audience:"\u{1F465} Excellent! Target audience defined - your marketing just got more focused!",material:"\u{1F52C} Nice! Material info added - customers can make informed decisions!",dimensions:"\u{1F4CF} Great! Dimensions added - no more size surprises for customers!",weight:"\u2696\uFE0F Perfect! Weight information helps with shipping expectations!",color:"\u{1F3A8} Colorful! Color info added - visual buyers will love this!",brand:"\u{1F3F7}\uFE0F Brand power! Brand info strengthens customer trust!",warranty:"\u{1F6E1}\uFE0F Security boost! Warranty info builds customer confidence!",sku:"\u{1F4E6} Organized! SKU added for better inventory management!",tags:"\u{1F3F7}\uFE0F Tagged! Product categorization just got better!",ai_search_queries:"\u{1F916} AI-ready! Search queries optimized for AI discovery!",semantic_description:"\u{1F9E0} Smart! AI-optimized description for better search matching!"})[h]||`\u2705 ${h.charAt(0).toUpperCase()+h.slice(1).replace(/_/g," ")} updated!`,n="";r.length===1?n=a(r[0]):r.length===2?n=`\u{1F389} Double win! Updated ${r.map(h=>h.replace(/_/g," ")).join(" and ")}!`:r.length>=3&&(n=`\u{1F680} Amazing progress! Applied ${r.length} improvements - you're on fire!`);let u=selectedProduct.score,S=0;if(t.scoreImprovement){u=t.scoreImprovement.final;let h=t.scoreImprovement.improvement;S=r.length*15,h>0?n+=` \u{1F4C8} Score: ${t.scoreImprovement.initial}% \u2192 ${t.scoreImprovement.final}% (+${h.toFixed(0)}%) | +${S} points!`:n+=` \u{1F4CA} Score: ${t.scoreImprovement.final}%`}let q=selectedProduct.gaps.filter(h=>!r.includes(h)),v={...selectedProduct,score:u,gaps:q};setProducts(h=>h.map(F=>F.id===selectedProduct.id?v:F)),setSelectedProduct(v),setRecommendations([]),setApprovalState({}),setJustAppliedChanges(!0);let P=typeof n=="string"&&n.length>0&&!n.match(/^\d{3}$/)?n:"Changes applied successfully!";setToastMessage(P),setToastActive(!0)}else t.error?(setToastMessage(`Failed to apply changes: ${t.error}`),setToastActive(!0)):(console.error("\u{1F6A8} Unexpected response format:",t),setToastMessage(`Unexpected response: ${JSON.stringify(t)}`),setToastActive(!0));setIsApplyingChanges(!1)}if(M.data&&isSavingCustomerInput){let t=M.data;if(console.log("\u{1F50D} Customer input save response:",t),t.success&&selectedProduct){let r=t.appliedFields||[],a=t.appliedCount||0,n="";a===1?n=`\u{1F389} Great! ${r[0]?.replace(/_/g," ")} added to your product specs!`:a>1&&(n=`\u{1F680} Excellent! Added ${a} product specifications!`);let u=a*4;n+=` \u{1F4C8} Health score boost: ~+${u}% | +${a*15} points!`;let S=selectedProduct.gaps.filter(P=>!r.includes(P)),q=Math.min(100,selectedProduct.score+u),v={...selectedProduct,score:q,gaps:S};setProducts(P=>P.map(h=>h.id===selectedProduct.id?v:h)),setSelectedProduct(v),setCustomerInputData({}),setCustomerInputOpen(!1),setJustAppliedChanges(!0),setToastMessage(n),setToastActive(!0)}else t.error&&(setToastMessage(`Failed to save: ${t.error}`),setToastActive(!0));setIsSavingCustomerInput(!1)}let K=t=>({material:"e.g., Cotton, Polyester, Steel, Wood",weight:"e.g., 2.5 lbs, 1.2 kg",color:"e.g., Navy Blue, Black, Red",size:"e.g., Large, XL, 12x8x4",brand:"e.g., Your Brand Name",model:"e.g., Model ABC-123",upc:"e.g., 123456789012",vendor:"e.g., Supplier Company",age_range:"e.g., 18-65, Adults, 3+",compatibility:"e.g., iPhone 12, Samsung Galaxy",warranty:"e.g., 1 year limited warranty",return_policy:"e.g., 30-day returns accepted",shipping_info:"e.g., Free shipping over $50",specifications:"e.g., Power: 110V, Material: ABS Plastic",documentation_url:"e.g., https://yoursite.com/manual.pdf",video_urls:"e.g., https://youtube.com/watch?v=abc123"})[t]||`Enter ${t.replace(/_/g," ")}`,X=t=>({material:"Primary material or fabric composition",weight:"Product weight with unit (lbs, kg, oz)",color:"Primary color or color options",brand:"Manufacturer or brand name",warranty:"Warranty terms and duration",upc:"Universal Product Code for inventory",specifications:"Technical specs, one per line"})[t]||"",c=t=>{let r={required:25,high:20,medium:15,low:10},a=["material","dimensions","weight","brand"],n=["color","size","upc","compatibility","age_range","gender"];return a.includes(t)?r.high:n.includes(t)?r.medium:r.low},y=t=>{let r=["material","dimensions","weight","brand"],a=["color","size","upc","compatibility","age_range","gender"];return r.includes(t)?"4-5":a.includes(t)?"3-4":"2-3"},T=()=>{if(!selectedProduct)return;let t=[],r={};if(Object.entries(customerInputData).forEach(([a,n])=>{let u=n.trim();u&&(a==="upc"&&u.length<8?t.push("UPC must be at least 8 digits"):a==="weight"&&!/\d+(\.\d+)?\s*(lbs?|kgs?|oz|pounds?|kilograms?|ounces?)/i.test(u)?t.push('Weight must include unit (e.g., "2.5 lbs", "1.2 kg")'):(a==="documentation_url"||a==="video_urls")&&u&&!u.startsWith("http")?t.push(`${a.replace(/_/g," ")} must be a valid URL starting with http`):a==="age_range"&&u&&!/\d+/.test(u)?t.push('Age range must contain numbers (e.g., "18+", "3-12")'):r[a]=u)}),t.length>0){setToastMessage(`Validation errors: ${t.join(", ")}`),setToastActive(!0);return}if(Object.keys(r).length===0){setToastMessage("Please fill in at least one field before saving"),setToastActive(!0);return}setIsSavingCustomerInput(!0),M.submit({action:"save-customer-input",productId:selectedProduct.id,inputData:JSON.stringify(r)},{method:"post"})},w=E.filter(t=>!(showOnlyLowHealth&&t.score>=70||showOnlyNoDescription&&t.description&&t.description!=="No description")),ae=E.map(t=>[t.id,t.title,t.description.length>50?`${t.description.substring(0,50)}...`:t.description,`${t.score}%`,t.gaps.length>0?t.gaps.join(", "):"None"]);return(0,e.jsxs)(pe,{title:"CatalogAI Optimizer Dashboard",children:[(0,e.jsxs)(x,{children:[(0,e.jsx)(x.Section,{children:(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[(0,e.jsx)(d,{children:(0,e.jsxs)(i,{align:"center",children:[(0,e.jsxs)("div",{style:{position:"relative",width:"80px",height:"80px",marginBottom:"10px"},children:[(0,e.jsxs)("svg",{width:"80",height:"80",style:{transform:"rotate(-90deg)"},children:[(0,e.jsx)("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),(0,e.jsx)("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:p.aiReadinessScore>=90?"#10b981":p.aiReadinessScore>=50?"#f59e0b":"#ef4444",strokeWidth:"8",strokeDasharray:`${p.aiReadinessScore/100*220} 220`,strokeLinecap:"round"})]}),(0,e.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"18px",fontWeight:"bold",color:p.aiReadinessScore>=90?"#10b981":p.aiReadinessScore>=50?"#f59e0b":"#ef4444"},children:[p.aiReadinessScore,"%"]})]}),(0,e.jsxs)(s,{variant:"headingLg",as:"p",children:[p.aiReadinessScore," / 100"]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Excellent AI readiness"})]})}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{align:"center",children:[(0,e.jsxs)(s,{variant:"headingLg",as:"p",children:[p.productsPassedPercentage,"%"]}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[p.validProducts," of ",p.totalProducts," products"]}),(0,e.jsx)(s,{variant:"bodySm",tone:"success",as:"p",children:"\u2191 5% from last week"})]})}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{align:"center",children:[(0,e.jsx)(s,{variant:"headingLg",as:"p",children:p.lastSyncTime?`${Math.floor((Date.now()-new Date(p.lastSyncTime).getTime())/(1e3*60*60))}h ago`:"Never"}),(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:"Last synced successfully"})]})})]})}),(0,e.jsx)(x.Section,{children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"Feed Health"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Product validation distribution"}),(0,e.jsxs)("div",{style:{marginTop:"20px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,e.jsx)("div",{style:{width:`${p.validProducts/p.totalProducts*200}px`,height:"8px",background:"#10b981",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[p.validProducts," products"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,e.jsx)("div",{style:{width:`${p.warningProducts/p.totalProducts*200}px`,height:"8px",background:"#f59e0b",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[p.warningProducts," products"]})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,e.jsx)("div",{style:{width:`${p.invalidProducts/p.totalProducts*200}px`,height:"8px",background:"#ef4444",borderRadius:"4px",marginRight:"10px",minWidth:"20px"}}),(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[p.invalidProducts," products"]})]}),(0,e.jsx)(g,{variant:"primary",children:"View Validation Report"})]})]})})}),(0,e.jsx)(x.Section,{children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"Next Actions"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Recommended optimizations for your catalog"}),(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginTop:"20px"},children:[(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:[p.invalidProducts," products need attention"]}),(0,e.jsx)(g,{variant:"primary",tone:"critical",children:"Take Action"})]})}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:["Optimize ",p.warningProducts," products"]}),(0,e.jsx)(g,{variant:"primary",children:"Take Action"})]})})]})]})})}),(0,e.jsx)(x.Section,{children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)("div",{style:{marginBottom:"10px"},children:(0,e.jsx)("div",{style:{width:"100%",height:"8px",background:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:(0,e.jsx)("div",{style:{width:`${p.optimizationProgress}%`,height:"100%",background:"#3b82f6",transition:"width 0.3s ease"}})})}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)(s,{variant:"bodyMd",as:"p",children:["Your catalog is ",p.optimizationProgress,"% AI-ready \u2014 ",100-p.optimizationProgress,"% left to optimize!"]}),(0,e.jsxs)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:[p.optimizationProgress,"% Complete"]})]}),(0,e.jsx)("div",{style:{marginTop:"5px"},children:(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Keep going! \u{1F680}"})})]})})}),(0,e.jsx)(x.Section,{children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingLg",as:"h2",children:"\u{1F4E6} Product Catalog"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Browse and manage your product inventory"})]}),(0,e.jsx)(l,{children:(0,e.jsx)(g,{onClick:H,loading:isSyncing,variant:"primary",size:"large",children:isSyncing?"Syncing...":"\u{1F504} Sync Products"})})]}),(0,e.jsx)(d,{children:(0,e.jsxs)(l,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Filter by:"}),(0,e.jsx)(g,{variant:showOnlyLowHealth?"primary":"tertiary",size:"slim",onClick:()=>setShowOnlyLowHealth(!showOnlyLowHealth),children:"\u{1F6A8} Low Health Only"}),(0,e.jsx)(g,{variant:showOnlyNoDescription?"primary":"tertiary",size:"slim",onClick:()=>setShowOnlyNoDescription(!showOnlyNoDescription),children:"\u{1F4DD} Missing Descriptions"})]}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Showing ",w.length," of ",E.length," products"]})]})}),(0,e.jsx)("div",{className:"product-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px",marginTop:"20px",width:"100%"},children:w.map((t,r)=>(0,e.jsx)(d,{children:(0,e.jsxs)(l,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(g,{variant:"plain",onClick:()=>_(t),children:t.title}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["ID: ",t.id]})]}),(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:t.description&&t.description!=="No description"?t.description.length>100?`${t.description.substring(0,100)}...`:t.description:(0,e.jsx)(s,{tone:"subdued",variant:"bodyMd",as:"p",children:"No description available"})}),t.gaps.length>0&&(0,e.jsxs)(l,{wrap:!0,children:[t.gaps.slice(0,3).map((a,n)=>(0,e.jsx)(m,{tone:"warning",size:"small",children:a},n)),t.gaps.length>3&&(0,e.jsx)(m,{tone:"info",size:"small",children:`+${t.gaps.length-3} more`})]})]})]}),(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(D,{progress:t.score,size:"small"}),(0,e.jsx)(m,{tone:t.score>=90?"success":t.score>=70?"warning":"critical",size:"small",children:`${t.score}%`})]}),(0,e.jsx)(g,{size:"slim",variant:"primary",onClick:()=>_(t),children:"\u{1F527} Optimize"})]})]})},t.id))}),w.length===0&&(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F389} No products match your filters!"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:showOnlyLowHealth?"All your products are healthy! Great job maintaining your catalog.":showOnlyNoDescription?"All your products have descriptions! Your catalog is well-documented.":"No products found matching your current filters."}),(0,e.jsx)(g,{variant:"tertiary",onClick:()=>{setShowOnlyLowHealth(!1),setShowOnlyNoDescription(!1)},children:"Clear Filters"})]})})]})})}),(0,e.jsx)(x.Section,{variant:"oneHalf",children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Quick Actions"}),(0,e.jsxs)(i,{children:[(0,e.jsx)(g,{fullWidth:!0,onClick:V,loading:isHealthChecking,variant:G<90?"primary":"secondary",children:G<90?"Quick Scan Now":"Run Health Check"}),(0,e.jsx)(g,{fullWidth:!0,children:"Generate Feed"}),(0,e.jsx)(g,{fullWidth:!0,children:"View Analytics"})]})]})})}),(0,e.jsx)(x.Section,{variant:"oneHalf",children:(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Recent Activity"}),(0,e.jsx)(i,{children:O.length>0?O.map(t=>(0,e.jsxs)(i,{children:[(0,e.jsxs)(s,{as:"span",children:[t.type==="sync"&&"\u{1F504} ",t.type==="push"&&"\u{1F4E4} ",t.type==="error"&&"\u274C ",t.type==="health_scan"&&"\u{1F50D} ",t.type==="auto_fix"&&"\u{1F527} ",t.type==="ai_enrichment"&&"\u{1F916} ",t.type==="settings_update"&&"\u2699\uFE0F ",t.message]}),(0,e.jsx)(s,{as:"p",variant:"bodySm",tone:"subdued",children:new Date(t.createdAt).toLocaleString()})]},t.id)):(0,e.jsx)(s,{as:"p",tone:"subdued",children:"No recent activity"})})]})})})]}),toastActive&&(0,e.jsx)(Q,{content:toastMessage,onDismiss:()=>setToastActive(!1)}),(0,e.jsx)(fe,{isOpen:healthModalOpen,onClose:()=>setHealthModalOpen(!1),jobId:healthCheckJobId,currentScore:G,currentGaps:[]}),(0,e.jsx)($,{open:productModalOpen,onClose:()=>setProductModalOpen(!1),title:"",size:"large",primaryAction:{content:"Close",onAction:()=>setProductModalOpen(!1)},children:selectedProduct&&(0,e.jsx)($.Section,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsxs)(s,{variant:"headingLg",as:"h2",children:["\u{1F4E6} ",selectedProduct.title]}),(0,e.jsxs)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:["Product ID: ",selectedProduct.id]}),selectedProduct.description&&selectedProduct.description!=="No description"&&(0,e.jsx)(s,{variant:"bodyMd",as:"p",children:selectedProduct.description})]}),(0,e.jsxs)(i,{children:[(0,e.jsxs)(m,{tone:selectedProduct.score>=90?"success":selectedProduct.score>=70?"warning":"critical",size:"large",children:[selectedProduct.score,"% Health"]}),justAppliedChanges&&(0,e.jsx)(m,{tone:"success",size:"small",children:"\u2728 Just Updated!"})]})]}),(0,e.jsxs)(k,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Overall Health Progress"}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:`${Math.round(selectedProduct.score/100*500)} / 500 points`})]}),(0,e.jsx)(k,{paddingBlockStart:"200",children:(0,e.jsx)(D,{progress:selectedProduct.score,size:"large"})})]})]})}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F4CA} Category Breakdown"}),(0,e.jsx)(l,{children:[{name:"\u{1F6A8} Required Fields",icon:"\u{1F6A8}",fields:["title","description","price","availability","category"],color:"critical",description:"Essential for product visibility"},{name:"\u26A1 High Priority",icon:"\u26A1",fields:["material","dimensions","weight","brand","use_cases","features","image_urls"],color:"warning",description:"Important for customer decisions"},{name:"\u{1F4CB} Medium Priority",icon:"\u{1F4CB}",fields:["color","size","target_audience","keywords","upc","compatibility","age_range","gender","video_urls"],color:"attention",description:"Enhances product discovery"},{name:"\u2728 Enhancement",icon:"\u2728",fields:["model","sku","tags","vendor","warranty","return_policy","shipping_info","documentation_url","specifications","ai_search_queries","semantic_description"],color:"success",description:"Optimizes for AI search"}].map((t,r)=>{let a=selectedProduct.gaps.filter(S=>t.fields.includes(S)).length,n=t.fields.length-a,u=Math.round(n/t.fields.length*100);return(0,e.jsx)(d,{children:(0,e.jsxs)(l,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(s,{variant:"headingSm",as:"h4",children:[t.icon," ",t.name]}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:t.description}),(0,e.jsxs)(l,{wrap:!0,children:[(0,e.jsxs)(s,{variant:"bodySm",as:"p",children:[n,"/",t.fields.length," complete"]}),a>0&&(0,e.jsx)(m,{tone:"warning",size:"small",children:`${a} missing`})]})]}),(0,e.jsxs)(i,{children:[(0,e.jsx)(D,{progress:u,size:"small"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:`${u}% complete`})]})]})},r)})})]})}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F50D} Missing Fields Analysis"}),selectedProduct.gaps.length===0?(0,e.jsx)(m,{tone:"success",size:"large",children:"\u{1F389} Perfect Score!"}):(0,e.jsx)(m,{tone:"critical",size:"large",children:`${selectedProduct.gaps.length} fields missing`})]}),selectedProduct.gaps.length>0?(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"These fields are missing and could improve your product's visibility and AI search performance:"}),(0,e.jsx)(l,{wrap:!0,children:selectedProduct.gaps.map((t,r)=>(0,e.jsx)(m,{tone:"warning",size:"small",children:t.replace(/_/g," ")},r))})]}):(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"success",as:"p",children:"\u{1F389} Congratulations! Your product has all the essential fields completed."}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"This product is optimized for search engines and AI-powered discovery."})]})]})}),selectedProduct.gaps.length>0&&(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u{1F916} AI Recommendations"}),recommendations.length>0&&(0,e.jsx)(g,{onClick:()=>{setRecommendations([]),setApprovalState({}),N()},variant:"secondary",size:"slim",loading:isGeneratingRecommendations,children:"\u{1F504} Regenerate"})]}),recommendations.length===0?(0,e.jsxs)(i,{children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"\u{1F3AF} Ready to improve your product's health score?"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Our AI will analyze your missing fields and suggest improvements for:"}),(0,e.jsxs)(l,{wrap:!0,children:[selectedProduct.gaps.slice(0,5).map((t,r)=>(0,e.jsx)(m,{tone:"warning",size:"small",children:t.replace(/_/g," ")},r)),selectedProduct.gaps.length>5&&(0,e.jsx)(m,{tone:"info",size:"small",children:`+${selectedProduct.gaps.length-5} more`})]})]}),(0,e.jsx)(g,{onClick:N,variant:"primary",size:"large",loading:isGeneratingRecommendations,children:isGeneratingRecommendations?"\u{1F916} Generating...":"\u{1F680} Generate AI Recommendations"})]}):(0,e.jsxs)(i,{children:[selectedProduct.recommendations?.generatedAt&&(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Generated: ",new Date(selectedProduct.recommendations.generatedAt).toLocaleString()]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Review and approve the AI-generated suggestions below. Only approved changes will be applied to your product."})]})]})}),recommendations.length>0&&(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"\u270F\uFE0F Review & Approve Recommendations"}),(0,e.jsxs)(l,{children:[(0,e.jsx)(m,{tone:"success",size:"small",children:`${Object.values(approvalState).filter(Boolean).length} approved`}),(0,e.jsx)(m,{tone:"critical",size:"small",children:`${Object.values(approvalState).filter(t=>t===!1).length} rejected`})]})]}),(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Review each AI suggestion below. Use \u2705 to approve or \u274C to reject. Only approved changes will be applied to your product."}),(0,e.jsx)(d,{children:(0,e.jsxs)(l,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Quick Actions:"}),(0,e.jsxs)(l,{children:[(0,e.jsx)(g,{size:"slim",variant:"secondary",tone:"success",onClick:()=>{let t=recommendations.reduce((r,a)=>({...r,[a.field]:!0}),{});setApprovalState(t)},children:"\u2705 Approve All"}),(0,e.jsx)(g,{size:"slim",variant:"secondary",tone:"critical",onClick:()=>{let t=recommendations.reduce((r,a)=>({...r,[a.field]:!1}),{});setApprovalState(t)},children:"\u274C Reject All"}),(0,e.jsx)(g,{size:"slim",variant:"secondary",onClick:()=>setApprovalState({}),children:"Clear All"})]})]})}),(0,e.jsx)(i,{children:recommendations.map((t,r)=>{let a=approvalState[t.field]===!0,n=approvalState[t.field]===!1,u=approvalState[t.field]===void 0,S=t.status==="applied",v=(P=>{let h={required:{fields:["title","description","price","availability","category"],points:"25",impact:"5-6%",color:"critical",icon:"\u{1F6A8}"},high:{fields:["material","dimensions","weight","brand","use_cases","features","image_urls"],points:"20",impact:"4-5%",color:"warning",icon:"\u26A1"},medium:{fields:["color","size","target_audience","keywords","upc","compatibility","age_range","gender","video_urls"],points:"15",impact:"3-4%",color:"attention",icon:"\u{1F4CB}"},low:{fields:["model","sku","tags","vendor","warranty","return_policy","shipping_info","documentation_url","specifications","ai_search_queries","semantic_description"],points:"10",impact:"2-3%",color:"info",icon:"\u2728"}};for(let[F,ne]of Object.entries(h))if(ne.fields.includes(P))return{category:F,...ne};return{category:"low",fields:[],points:"10",impact:"2%",color:"info",icon:"\u2728"}})(t.field);return(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(s,{variant:"headingSm",as:"h4",children:[v.icon," ",t.field.charAt(0).toUpperCase()+t.field.slice(1).replace(/_/g," ")]}),(0,e.jsx)(m,{tone:v.color,size:"small",children:v.category.charAt(0).toUpperCase()+v.category.slice(1)})]}),(0,e.jsxs)(l,{wrap:!0,children:[(0,e.jsxs)(m,{tone:"info",size:"small",children:["+",v.points," pts"]}),(0,e.jsxs)(m,{tone:"subdued",size:"small",children:["~",v.impact," impact"]}),S&&(0,e.jsx)(m,{tone:"success",size:"small",children:"\u{1F680} Applied"}),!S&&a&&(0,e.jsx)(m,{tone:"success",size:"small",children:"\u2705 Approved"}),!S&&n&&(0,e.jsx)(m,{tone:"critical",size:"small",children:"\u274C Rejected"}),!S&&u&&(0,e.jsx)(m,{tone:"attention",size:"small",children:"\u23F3 Pending"})]})]}),!S&&(0,e.jsxs)(l,{children:[(0,e.jsx)(g,{size:"slim",onClick:()=>j(t.field,!1),variant:n?"primary":"secondary",tone:n?"critical":void 0,children:n?"\u274C Rejected":"\u274C Reject"}),(0,e.jsx)(g,{size:"slim",onClick:()=>j(t.field,!0),variant:a?"primary":"secondary",tone:a?"success":void 0,children:a?"\u2705 Approved":"\u2705 Approve"})]})]}),(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Current Value"}),(0,e.jsx)(k,{padding:"200",borderRadius:"100",children:(0,e.jsx)(s,{variant:"bodySm",as:"p",children:t.originalValue||(0,e.jsx)(s,{tone:"subdued",as:"p",children:"(empty)"})})})]}),(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"success",as:"p",children:"AI Recommendation"}),(0,e.jsx)(k,{padding:"200",borderRadius:"100",children:(0,e.jsx)(s,{variant:"bodySm",as:"p",children:t.newValue})})]})]}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["\u{1F4A1} ",(0,e.jsx)("em",{children:t.improvement})]})]})})]})},r)})}),(0,e.jsx)(d,{children:(0,e.jsxs)(l,{children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodyMd",tone:"subdued",as:"p",children:"Ready to apply your approved changes?"}),(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:[recommendations.filter(t=>t.status!=="applied"&&approvalState[t.field]===!0).length," changes approved for application"]})]}),(0,e.jsxs)(l,{children:[(0,e.jsx)(g,{onClick:()=>setRecommendations([]),variant:"secondary",children:"Cancel"}),(0,e.jsx)(g,{variant:"primary",size:"large",onClick:Y,loading:isApplyingChanges,disabled:recommendations.filter(t=>t.status!=="applied"&&approvalState[t.field]===!0).length===0,children:isApplyingChanges?"\u{1F680} Applying...":`\u2705 Apply ${recommendations.filter(t=>t.status!=="applied"&&approvalState[t.field]===!0).length} Changes`})]})]})})]})}),selectedProduct.gaps.length>0&&(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsxs)(l,{align:"space-between",children:[(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:"Manual Product Information"}),(0,e.jsx)(s,{variant:"bodySm",tone:"subdued",as:"p",children:"Fill in product specs that only you know. These can't be generated by AI."})]}),(0,e.jsx)(g,{onClick:()=>setCustomerInputOpen(!customerInputOpen),variant:"secondary",size:"slim",children:customerInputOpen?"Hide Fields":"Add Product Info"})]}),(0,e.jsx)(ue,{id:"customer-input-collapsible",open:customerInputOpen,children:(0,e.jsxs)(i,{children:[selectedProduct.gaps.filter(t=>me(t)==="customer_required").map((t,r)=>{let a=he[t]||t.charAt(0).toUpperCase()+t.slice(1).replace(/_/g," ");return(0,e.jsxs)(k,{children:[t==="dimensions"?(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"bodySm",as:"p",children:a}),(0,e.jsxs)(l,{gap:"300",children:[(0,e.jsx)(L,{label:"Length",value:customerInputData[`${t}_length`]||"",onChange:n=>setCustomerInputData(u=>({...u,[`${t}_length`]:n})),placeholder:"e.g., 12 inches",autoComplete:"off"}),(0,e.jsx)(L,{label:"Width",value:customerInputData[`${t}_width`]||"",onChange:n=>setCustomerInputData(u=>({...u,[`${t}_width`]:n})),placeholder:"e.g., 8 inches",autoComplete:"off"}),(0,e.jsx)(L,{label:"Height",value:customerInputData[`${t}_height`]||"",onChange:n=>setCustomerInputData(u=>({...u,[`${t}_height`]:n})),placeholder:"e.g., 4 inches",autoComplete:"off"})]})]}):t==="gender"?(0,e.jsx)(ge,{label:a,options:[{label:"Select target gender",value:""},{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Unisex",value:"unisex"},{label:"Kids",value:"kids"}],value:customerInputData[t]||"",onChange:n=>setCustomerInputData(u=>({...u,[t]:n}))}):(0,e.jsx)(L,{label:a,value:customerInputData[t]||"",onChange:n=>setCustomerInputData(u=>({...u,[t]:n})),placeholder:K(t),helpText:X(t),multiline:t==="specifications"||t==="warranty"||t==="return_policy",autoComplete:"off"}),(0,e.jsx)(k,{paddingBlockStart:"200",children:(0,e.jsxs)(l,{gap:"200",blockAlign:"center",children:[(0,e.jsxs)(s,{variant:"bodySm",tone:"subdued",as:"p",children:["Impact: +",c(t)," points, ~",y(t),"% health boost"]}),customerInputData[t]&&(0,e.jsx)(m,{tone:"success",size:"small",children:"\u2705 Ready to save"})]})})]},r)}),Object.keys(customerInputData).length>0&&(0,e.jsxs)(l,{align:"end",children:[(0,e.jsx)(g,{onClick:()=>setCustomerInputData({}),children:"Clear All"}),(0,e.jsxs)(g,{variant:"primary",onClick:T,loading:isSavingCustomerInput,children:["Save ",Object.values(customerInputData).filter(t=>t.trim()).length," Fields"]})]})]})})]})}),selectedProduct.score>=90&&(0,e.jsx)(d,{children:(0,e.jsxs)(i,{children:[(0,e.jsx)(s,{variant:"headingMd",as:"h3",children:selectedProduct.score===100?"\u{1F389} Perfect Product Health!":"\u2705 Product Health: Excellent"}),(0,e.jsx)(s,{as:"p",children:selectedProduct.score===100?"Congratulations! This product has achieved perfect health with all OpenAI spec requirements met.":"This product has a high health score and does not need immediate attention."}),selectedProduct.gaps.length===0&&selectedProduct.score===100&&(0,e.jsx)(s,{variant:"bodySm",tone:"success",as:"p",children:"\u{1F680} Ready for OpenAI ChatGPT discovery!"})]})})]})})})]})}export{ye as default};
